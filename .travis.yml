os: linux
dist: trusty
language: cpp
compiler:
  - gcc
  - clang
sudo: required
env:
  - TARGET=
  - CXX_FOR_TARGET=g++-5
    CXXFLAGS_FOR_TARGET="-m32 -O3 -fPIC -pie -Wall"
    TARGET=i686-linux-gnu
  - CXX_FOR_TARGET=g++-5
    CXXFLAGS_FOR_TARGET="-m32 -O3 -fPIC -pie -Wall"
    TARGET=i386-linux-gnu
  - TARGET=i386-linux-gnu
  - TARGET=armv7-a-linux-gnueabi
  - TARGET=armv6-linux-gnueabi
  - TARGET=armv4-linux-gnueabi
  - TARGET=armv4t-linux-gnueabi
install: ./test/infra/travis-install-deps.sh
script: ./configure ${TARGET:+"--target=$TARGET"} && make && make check
