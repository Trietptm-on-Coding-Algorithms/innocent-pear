#!/bin/sh

set -e
: "${CXXFLAGS=-O3 -fPIC -pie -Wall}"
: "${CXXFLAGS_FOR_TARGET=-O3 -fPIC -pie -Wall}"
. "`dirname "$0"`"/lolwutconf/configure.inc
conf_begin ${1+"$@"}
conf_mod c++ c++.target
conf_cxx_probe_var_tpls
conf_cxxt_probe_var_tpls
conf_cxx_probe_decltype
conf_cxxt_probe_decltype
conf_cxx_chk_typ boost::mt19937_64 \
    '#include <boost/random/mersenne_twister.hpp>'
conf_cxx_probe_typ std::uint64_t '#include <cinttypes>'
conf_cxxt_probe_typ std::uint64_t '#include <cinttypes>'
conf_cxxt_probe_typ std::uintptr_t '#include <cinttypes>'
conf_cxx_probe_typ ::uint64_t '#include <inttypes.h>'
conf_cxxt_probe_typ ::uint64_t '#include <inttypes.h>'
conf_cxxt_probe_typ ::uintptr_t '#include <inttypes.h>'
conf_cxxt_probe_wchar_typ
conf_cxx_probe_func std::mbrtoc16 4 '#include <cuchar>'
conf_cxx_probe_func std::mbrtoc32 4 '#include <cuchar>'
conf_cxx_probe_func ::mbrtoc16 4 '#include <uchar.h>'
conf_cxx_probe_func ::mbrtoc32 4 '#include <uchar.h>'
conf_cxx_probe_func ::secure_getenv 1 '#include <cstdlib>'
conf_cxx_probe_typ 'struct bfd' '#include <bfd.h>'
conf_cxx_probe_lib bfd 'bfd-multiarch bfd' \
    '#include <bfd.h>' 'void foo() { bfd_openr("/dev/null", "binary"); }'
conf_cxxt_probe_dyn_ld
conf_cxxt_probe_ctor_priority
#
# The Linux ptrace(2) man page calls this PTRACE_TRACEME, but Linux
# <sys/ptrace.h> also defines PT_TRACE_ME to the same value.  BSD uses the
# name PT_TRACE_ME.
#
# Ditto for PT_GETREGS vs. PTRACE_GETREGS, etc.
#
conf_cxxt_probe_const PT_TRACE_ME '#include <sys/ptrace.h>'
conf_cxxt_probe_impld_func ::ptrace 4 'PT_TRACE_ME, 0, 0, 0' '-1' \
    '#include <sys/ptrace.h>'
conf_cxxt_probe_const PT_GETREGS '#include <sys/ptrace.h>'
conf_cxxt_probe_const PT_SETREGS '#include <sys/ptrace.h>'
conf_cxxt_probe_const PT_READ_I '#include <sys/ptrace.h>'
conf_cxxt_probe_const PT_READ_D '#include <sys/ptrace.h>'
conf_cxxt_probe_const PT_READ_U '#include <sys/ptrace.h>'
conf_end
